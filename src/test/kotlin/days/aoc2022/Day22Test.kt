package days.aoc2022

import org.hamcrest.CoreMatchers.`is`
import org.hamcrest.MatcherAssert
import org.junit.Test
import util.Point2d

class Day22Test {
    val day = Day22()
    val input = """        ...#
        .#..
        #...
        ....
...#.......#
........#...
..#....#....
..........#.
        ...#....
        .....#..
        .#......
        ......#.

10R5L5R10L4R5L5""".lines()

    /*

  1122
  1122
  33
  33
4455
4455
66
66

     */

    val input2 = """                                                  ......#...........#..#....#...#..........................#..###..#...........................#......
                                                  ............#..........#..#......#..#...#..........#............................#...................
                                                  ......#.#....#....................#...#.......#.....#......................#.#......#...............
                                                  ...#......#..#............#...................##...................#........................#..#....
                                                  ........#...............#...................#.......#..#.....................#......................
                                                  ..#..#............................#..#...#.............#..........................##.#.......#......
                                                  ................#.....#.#.........#............#.#..........#.........#....#................#.......
                                                  ..............#.......................#......................#.............#...#....................
                                                  ..#.#................#.......#......#..#...#........#.#............#..........#......#...#....#..#..
                                                  ...#......#.#....#.......#.#.#......#......#....................#.......#......#................#...
                                                  ...#..#.#.......#........#...##.........##............#...........#............#.#....#.......#.....
                                                  ..#.................#......#......#.#..#.........#...#....#.....##..#......#.......................#
                                                  .......#..#..........................#........#.......#............#........................#.#.....
                                                  ...#..............#...#.......#.........#..........##....#....#.#..#..........#......#...........#..
                                                  ....................................#............#.....................................#............
                                                  ........#.#................#.........#...........#.................#...##......#....................
                                                  ..........#....#..........#...#..............#.........#.#.......#........#........##...............
                                                  .....#........#.................#..#.#........................#.....#..............#................
                                                  ........#...#.................#...#..#........#.#.............................................#.....
                                                  .#...#....................#................................#..........#..............#.....#....#...
                                                  ............#.............#......#....#........##...................................#.............#.
                                                  #.............#.....#..#............................#....#..............#..#...........#..........#.
                                                  .................#.....#.#.......#..........#...........#......#......#........#.........#..........
                                                  ....#........................#.........................#.....#...#....................#.......###...
                                                  ....................#........#....................#...........###..#....#..........#............##..
                                                  .............#...#........#.......#.....#.............#...#......................#...#........#..#..
                                                  ....#..............#.#....#........#.......#...#...#...............#..............#.##..#...........
                                                  ..................#.............#....#...#..#....#.......#........#......#..........................
                                                  ............#...........#............#.................#...#........................................
                                                  .............#.....#.....................#.............#.........#...##...........................#.
                                                  ........#...........................#..#...............#.............#..#.........#.#...............
                                                  ...#........#..#....#........#..........#....#.....#.##....................#.#.........#......#.##..
                                                  .................................#.............................................#...........#........
                                                  ..........................#..........#........#..............#..#........#.....##....#........#.#...
                                                  ......###.#..#............................................#...........##.#.#..#.......##....#.......
                                                  ...................#.................##..............##..#............#.............................
                                                  #....#...#....#...................#..............#...##....##.................#.....#.#.....#.......
                                                  .........#..........#.....................................#..#..............................#....#..
                                                  ........#......................................#.....#.................#...#.........#...#.....#....
                                                  #..............................#......................#.....#.#....#.................#..............
                                                  .....#..#.....##........#......#......#..#..#....#...#..........#..................#...#....#.......
                                                  #....#..........#...........................#................................#..#.......#.......#...
                                                  ....#......................#.....#.#..#.........#...#.#.........#.......................#..#......#.
                                                  ..........#.##...............#....##................#.......#........#...##.........................
                                                  ..#..#..........#..................................#............#............#..#..................#
                                                  ...........#.......#........#.#.......#........#..........#.....#....#.........#....................
                                                  ......................#...........................#.................##...#.....#.#...........#......
                                                  .......#.................#.........#...........##..#...#................#................#..#.......
                                                  ......................#..............#...#..#....#........................###...........#.#..#.#....
                                                  .#........#..............##......#........#.#..........#......#......................#..............
                                                  .........................#.........####...........
                                                  .............#........#.........#.##..............
                                                  #.#..#........#.......#....................#......
                                                  .....#............##.....##..........#...#........
                                                  ....................#........#......#.............
                                                  ..#...............#..#.................#..........
                                                  #........#......##..#...#...............#.........
                                                  .....................##.................#.........
                                                  ................#.......#..#.............#..#.....
                                                  ............#..#.#............#...........#.......
                                                  ...........#..#.....#....#.............#..........
                                                  ...................#........#.........#...........
                                                  ....#...#...........#........#.##............#....
                                                  ......#....##..........##..........#......#.....#.
                                                  .#................................#...............
                                                  ............#.#.......#...................#..##.#.
                                                  .#.....#...................##...#.................
                                                  ..#..#........................#...................
                                                  ....#...............#..#..#...#................#.#
                                                  .#..........#..#.......................#....#.....
                                                  .....................#...........................#
                                                  ..#.#...#...........#.#..............#..........#.
                                                  ..#.................#.#.......#............#.#.#..
                                                  .#......#...................#...#.........#....#..
                                                  .......##....#.........................#..........
                                                  ...#..#.............##.#.......#..........#.......
                                                  ....................#......#.#....................
                                                  .....##......#..#......#......#...................
                                                  .......#.........#.#........................#.....
                                                  #...#.............#..#......#........#............
                                                  ....#..#.....#.....................#.....#........
                                                  .....#.............#................#..........#..
                                                  ....#......#...#.#..#............#..........#.....
                                                  .#....#....................................#......
                                                  ....#......................#.##...............#..#
                                                  ........#.#.......................................
                                                  ......#........................##.....#.....#.....
                                                  .###.....#......#.........#............#..........
                                                  ..#......#...............#.#......................
                                                  .......#..................#......#...........#...#
                                                  .#...............................#.....#..........
                                                  ##.##.................#.....#.............#..#....
                                                  #.#...#.........##..#.....#......#................
                                                  .......#........#..#...................#..........
                                                  .....##..........##..#..........#.........#.......
                                                  ..#.....#...#.#...#..................#.......#..##
                                                  #.#...........#......#..#...........#.......#.....
                                                  ...#.....................#..#....###..............
                                                  ....#............#.......................#........
                                                  .......................#...........#.##...#.......
.#........#....#.......##......................#............#........................#............#.
#.........#..#....................................#.#...........#....#...#........#.......#.........
.....#.....#....#..#............................#.....#..#..........#.....##..#...#...............#.
..#........#...##.....................#......#..#........#.#.#.........#.............#..............
......#....#..#................#....#..#................................#....#......................
.......##.........##....#................................#........................#..#...#.#......#.
..#......#.............#....................#....#........#........................#..#......#......
.........#...#.#.....##......#...............................#........#.....#.....#....##..........#
......#................###.......#..............#.#.....##.....#....#....#..........#......#...##...
..#..........#..........#.........#....#.......#....##.........#..........#........#..............#.
......#..#........#...........#.#.....#...#....#......#...............#......##..#.....#...........#
#.......#......#........#...#.....................#.......#............................#....#...#...
..##............#..........................##....................#.....#.......#............#.......
..#..........................#....................#...#.........#.........#...............#.........
.#.............................#.........#......#..#................#...................#......#....
............#........#......#.................##................................##..........#.......
...#.......#.......#.#.......##...#............#...........#........................#........#...#.#
#.............#...#............................#.....#...#...............##....#....................
........#..#...............#..............#....................#..#.......#........##.............#.
...........#.............#...#..............#.....#....#....#.....#.#.......#.....#.................
...........................#......#...............#....#............................................
.....#.#......................#................#..............#..#......#......#...#............#...
#.........#........................#..#........#...#....#.....#.........##........................#.
......#.........#........................#..##........#.............#.....#...#........####.........
......#...................#.#...............#..................#............#.............#.........
......#............##......................#........#......#.......................#......#.........
......#........#........#.................#.......##...#......................#............#.##.....
..............#............#....................................#.##..#.....##....#............#....
..#.............................#............................................................#...#..
.............#........................#.#.........#....#.........#..........................#.......
.....#.........#...#.......................#....................#......#...#........................
.....#.....#.....#.......#........#.............#...#.....#......##.#..........##..#................
..#............#.....#.............................#.#........#.................#..#................
..#.#......#..#.......#.......#..........#..........#...#..................#.......................#
.................#............#....#.....................#.#....#.#.#.#................#............
#..........#..........#...........#........#.##....#...#...........#.....#.....#....................
....#....#...#......#..............#.#.........#...........##...................#......##.....##.#..
..#...#.....#.#..#......#.......##...#..........#.#.....#......#.....#.........#....................
........#......................##....#....#...#.#...#.........#.......................##..........#.
..............#......#.#........#....#......#..#....#.......#...........##...#........##............
.#..#...#..#.....#...............#.#...................##.................#........................#
##........#....#.#........#....................#..........#....#..........#.......##................
.......#.#.........#..........#......#............#..........#.#.#.........#...#..................#.
....#............#.................................#.#............#....#............#..#............
....#.................##.....#............................#..#...........#......................#...
...##....#......#.............#...##.........#........##................#..........#....#.....#..#..
.......#........##.................##....#.......#..................................................
.........#..................#..........#.#...................#............................#........#
.......#.#...#.....##...#....#..#...#...................#...#................#.............#.###....
............#......................#.......#..#..............#...........................#.......#..
.......................#..............#...........
...#......#.#..............#...##.#.........#.....
.........#.........#......#.......#...#...#......#
................................#..........##.....
..#...#.....#...#............#..#.................
#.........#......#................................
........##..........#.............#....#......#...
..............#......#...#........................
#...#.................#.#........#.....#..#.......
.......#.#................##..#.#..#..............
................#....#........#.................#.
................................#......#.#...###..
...#........................#....#.........#..#...
...........#.#...#......#............#.#..##......
...#...............#.#....##.......#..............
.....................#..#.........................
................#...#......................#......
.#....#.......#..............#....#......#........
.......................#..........###.......#.....
.........#.........#..........#.##....#.....#.....
.#......#....#........#...........................
..#..#.....#.............#.......................#
...#.................#..............#.............
..#..........#.....................#.............#
....#....#..............#...................#.....
....#..#....#...............................#....#
..........#..#..............#........#...#........
.#..#................#......##............#.......
.#......#...........................#.#.....#.....
.............#........................#...........
.##....#...#.................................#....
#..........##.#.#.................#.....#.........
..#....#..#.......##.........#..........#...#...#.
..............#...#.#........#...#.........#......
............#.#.............#................#....
.......#...#..........................##.......#..
.......................#.............#....#.......
...#...............#.............#.#.#.#.#........
......#....#......................#........#......
......#.......#....#.#..........................#.
...............#...............................#..
.........#.............#.#.###.............#......
.....#............................................
....................................#.....#.......
...........................................#......
...........................#....#...#...#..#......
.....#......#..........#.......#...............#..
............#.....#........#...................#.#
...............#..#.#........................##...
....#....#............#..#.....#....#..#..........

fdfdfd""".lines()

    @Test
    fun testPartOne() {
        MatcherAssert.assertThat(day.calculateFinalPassword(input), `is`(6032))
    }

    @Test
    fun testPartTwo() {
        val map = day.parseCube(input2, 50)
        MatcherAssert.assertThat(day.move(1, Day22.Facing.UP, map[Point2d(54,0)]!!),
            `is`(Pair(Day22.Facing.RIGHT, map[Point2d(0, 154)])))
        MatcherAssert.assertThat(day.move(1, Day22.Facing.LEFT, map[Point2d(0,154)]!!),
            `is`(Pair(Day22.Facing.DOWN, map[Point2d(54, 0)])))

        MatcherAssert.assertThat(day.move(1, Day22.Facing.LEFT, map[Point2d(50,0)]!!),
            `is`(Pair(Day22.Facing.RIGHT, map[Point2d(0, 149)])))
        MatcherAssert.assertThat(day.move(1, Day22.Facing.LEFT, map[Point2d(0,149)]!!),
            `is`(Pair(Day22.Facing.RIGHT, map[Point2d(50, 0)])))

        MatcherAssert.assertThat(day.move(1, Day22.Facing.RIGHT, map[Point2d(149,0)]!!),
            `is`(Pair(Day22.Facing.LEFT, map[Point2d(99, 149)])))
        MatcherAssert.assertThat(day.move(1, Day22.Facing.RIGHT, map[Point2d(99,149)]!!),
            `is`(Pair(Day22.Facing.LEFT, map[Point2d(149, 0)])))

        MatcherAssert.assertThat(day.move(1, Day22.Facing.RIGHT, map[Point2d(99,50)]!!),
            `is`(Pair(Day22.Facing.UP, map[Point2d(100, 49)])))
        MatcherAssert.assertThat(day.move(1, Day22.Facing.DOWN, map[Point2d(100,49)]!!),
            `is`(Pair(Day22.Facing.LEFT, map[Point2d(99, 50)])))

        MatcherAssert.assertThat(day.move(1, Day22.Facing.LEFT, map[Point2d(50,50)]!!),
            `is`(Pair(Day22.Facing.DOWN, map[Point2d(0, 100)])))
        MatcherAssert.assertThat(day.move(1, Day22.Facing.DOWN, map[Point2d(1,100)]!!),
            `is`(Pair(Day22.Facing.RIGHT, map[Point2d(50, 50)])))
    }
}